<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Space üíï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart {
            position: absolute;
            color: rgba(255, 182, 193, 0.7);
            font-size: 20px;
            animation: float 6s infinite ease-in-out;
        }

        @keyframes float {
            0% { transform: translateY(100vh) scale(0); opacity: 0; }
            15% { opacity: 1; }
            85% { opacity: 1; }
            100% { transform: translateY(-10vh) scale(1); opacity: 0; }
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 900px;
            width: 90%;
            position: relative;
            z-index: 10;
            backdrop-filter: blur(10px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        h1 {
            color: #e91e63;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        h2 {
            color: #e91e63;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 300px;
            margin: 0 auto;
        }

        input {
            padding: 15px;
            border: 2px solid #ffb6c1;
            border-radius: 15px;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        input:focus {
            border-color: #e91e63;
            transform: scale(1.02);
        }

        button {
            padding: 15px 30px;
            background: linear-gradient(45deg, #e91e63, #ff6b9d);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(233, 30, 99, 0.4);
        }

        .love-question {
            background: linear-gradient(45deg, #ffeef3, #fff0f5);
            padding: 40px;
            border-radius: 20px;
            margin: 20px 0;
            border: 3px solid #ffb6c1;
        }

        .question-text {
            font-size: 1.8em;
            color: #e91e63;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .love-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .yes-btn {
            background: linear-gradient(45deg, #4caf50, #66bb6a);
        }

        .no-btn {
            background: linear-gradient(45deg, #f44336, #ef5350);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .dashboard-btn {
            padding: 30px 20px;
            background: linear-gradient(45deg, #e91e63, #ff6b9d);
            color: white;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .dashboard-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(233, 30, 99, 0.4);
        }

        .chat-container, .notes-container, .timer-container, .video-container {
            max-width: 800px;
            margin: 20px auto;
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            background: #fafafa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #ffb6c1;
        }

        .message {
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 70%;
            word-wrap: break-word;
        }

        .message.sent {
            background: linear-gradient(45deg, #e91e63, #ff6b9d);
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .message.received {
            background: #f0f0f0;
            color: #333;
        }

        .chat-input-container {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
        }

        .notes-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .note-item {
            background: #fff9e6;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid #e91e63;
            text-align: left;
        }

        .note-meta {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 10px;
        }

        .timer-display {
            font-size: 3em;
            color: #e91e63;
            margin: 30px 0;
            font-weight: bold;
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .timer-input {
            width: 80px;
            text-align: center;
        }

        .video-call-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .video-container video {
            width: 100%;
            height: 200px;
            background: #000;
            border-radius: 15px;
            object-fit: cover;
        }

        .back-btn {
            background: linear-gradient(45deg, #9e9e9e, #bdbdbd);
            margin: 10px;
            padding: 10px 20px;
            font-size: 14px;
        }

        .user-indicator {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(233, 30, 99, 0.1);
            padding: 10px 20px;
            border-radius: 20px;
            color: #e91e63;
            font-weight: bold;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #4caf50, #66bb6a);
            color: white;
            padding: 15px 25px;
            border-radius: 15px;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @media (max-width: 768px) {
            .container { padding: 20px; }
            h1 { font-size: 2em; }
            .dashboard { grid-template-columns: 1fr; }
            .video-call-area { grid-template-columns: 1fr; }
            .love-buttons { flex-direction: column; align-items: center; }
            .timer-controls { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <div class="container">
        <div class="user-indicator" id="userIndicator" style="display: none;"></div>
        
        <!-- Login Page -->
        <div id="loginPage" class="page active">
            <h1>üíï Our Love Space üíï</h1>
            <p style="color: #666; margin-bottom: 30px; font-size: 1.2em;">A special place just for us ‚ù§Ô∏è</p>
            
            <form class="login-form" id="loginForm" onsubmit="return handleLogin(event)">
                <input type="text" id="username" placeholder="Username" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit">Login with Love üíñ</button>
            </form>
        </div>

        <!-- Love Question Page (for Sonam) -->
        <div id="lovePage" class="page">
            <h1>üíù A Question for You üíù</h1>
            <div class="love-question">
                <div class="question-text" id="questionText">Do you love me? üíï</div>
                <div class="love-buttons">
                    <button class="yes-btn" onclick="answerYes()">Yes! üíñ</button>
                    <button class="no-btn" onclick="answerNo()">No üò¢</button>
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboardPage" class="page">
            <h1 id="welcomeMessage">üíï Welcome to Our Love Space üíï</h1>
            
            <div class="dashboard">
                <button class="dashboard-btn" onclick="showChat()">
                    üí¨<br>Chat
                </button>
                <button class="dashboard-btn" onclick="showNotes()">
                    üìù<br>Notes
                </button>
                <button class="dashboard-btn" onclick="showTimer()">
                    ‚è∞<br>Timer
                </button>
                <button class="dashboard-btn" onclick="showVideo()">
                    üìπ<br>Video Call
                </button>
            </div>
        </div>

        <!-- Chat Page -->
        <div id="chatPage" class="page">
            <button class="back-btn" onclick="showDashboard()">‚Üê Back</button>
            <h2>üí¨ Our Chat</h2>
            
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages"></div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Type your message...">
                    <button onclick="sendMessage()">Send üíï</button>
                </div>
            </div>
        </div>

        <!-- Notes Page -->
        <div id="notesPage" class="page">
            <button class="back-btn" onclick="showDashboard()">‚Üê Back</button>
            <h2>üìù Our Notes</h2>
            
            <div class="notes-container">
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <input type="text" id="noteInput" placeholder="Write a note..." style="flex: 1;">
                    <button onclick="addNote()">Add Note üíñ</button>
                </div>
                <div class="notes-list" id="notesList"></div>
            </div>
        </div>

        <!-- Timer Page -->
        <div id="timerPage" class="page">
            <button class="back-btn" onclick="showDashboard()">‚Üê Back</button>
            <h2>‚è∞ Our Timer</h2>
            
            <div class="timer-container">
                <div class="timer-display" id="timerDisplay">00:00:00</div>
                
                <div class="timer-controls">
                    <input type="number" class="timer-input" id="hoursInput" placeholder="HH" min="0" max="23">
                    <span style="font-size: 1.5em; margin: 0 10px;">:</span>
                    <input type="number" class="timer-input" id="minutesInput" placeholder="MM" min="0" max="59">
                    <span style="font-size: 1.5em; margin: 0 10px;">:</span>
                    <input type="number" class="timer-input" id="secondsInput" placeholder="SS" min="0" max="59">
                </div>
                
                <div style="margin: 20px 0;">
                    <input type="text" id="timerMessage" placeholder="Timer message (optional)" style="width: 100%; max-width: 300px;">
                </div>
                
                <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="startTimer()">Start ‚ñ∂Ô∏è</button>
                    <button onclick="pauseTimer()">Pause ‚è∏Ô∏è</button>
                    <button onclick="resetTimer()">Reset üîÑ</button>
                </div>
            </div>
        </div>

        <!-- Video Call Page -->
        <div id="videoPage" class="page">
            <button class="back-btn" onclick="showDashboard()">‚Üê Back</button>
            <h2>üìπ Video Call</h2>
            
            <div class="video-container">
                <div class="video-call-area">
                    <div>
                        <h3>You</h3>
                        <video id="localVideo" autoplay muted></video>
                    </div>
                    <div>
                        <h3>Your Love</h3>
                        <video id="remoteVideo" autoplay></video>
                    </div>
                </div>
                
                <div style="margin: 20px 0; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="startVideoCall()">Start Call üìû</button>
                    <button onclick="endVideoCall()">End Call ‚ùå</button>
                </div>
                
                <p style="color: #666; font-size: 0.9em; margin-top: 20px;">
                    Note: Video calling requires both users to be online and grant camera/microphone permissions.
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentUser = null;
        let questionCount = 0;
        let timerInterval = null;
        let timerSeconds = 0;
        let isTimerRunning = false;
        let localStream = null;
        let peerConnection = null;

        const users = {
            puspender: { password: '12345', name: 'Puspender' },
            sonam: { password: '67890', name: 'Sonam' }
        };

        const loveQuestions = [
            "Do you love me? üíï",
            "Are you sure you don't love me? ü•∫",
            "Come on, you know you love me! üíñ",
            "Pretty please? Do you love me? ü•∞",
            "I know you love me deep down! ‚ù§Ô∏è",
            "Don't be shy, do you love me? üòä",
            "Your heart says yes, doesn't it? üíì",
            "I can wait... do you love me? ‚è∞üíï",
            "One more try... do you love me? üåü",
            "I believe in our love! Do you? ü¶ã"
        ];

        // Initialize floating hearts
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('floatingHearts');
            const heartSymbols = ['üíñ', 'üíï', 'üíó', 'üíù', 'üíò', '‚ù§Ô∏è', 'üíì', 'üíû'];
            
            setInterval(() => {
                if (Math.random() < 0.3) {
                    const heart = document.createElement('div');
                    heart.className = 'heart';
                    heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                    heart.style.left = Math.random() * 100 + '%';
                    heart.style.animationDelay = Math.random() * 2 + 's';
                    heart.style.animationDuration = (4 + Math.random() * 4) + 's';
                    heartsContainer.appendChild(heart);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 8000);
                }
            }, 1000);
        }

        // Login functionality
        function handleLogin(e) {
            if (e) e.preventDefault();
            
            const username = document.getElementById('username').value.toLowerCase().trim();
            const password = document.getElementById('password').value.trim();
            
            console.log('Attempting login:', username, password); // Debug log
            
            if (users[username] && users[username].password === password) {
                currentUser = username;
                document.getElementById('userIndicator').textContent = users[username].name;
                document.getElementById('userIndicator').style.display = 'block';
                
                showNotification('Login successful! Welcome! üíï', 'success');
                
                if (username === 'sonam') {
                    setTimeout(showLovePage, 1000);
                } else {
                    setTimeout(showDashboard, 1000);
                }
            } else {
                showNotification('Invalid credentials! Only for our love üíï', 'error');
            }
            return false;
        }
        
        // Add event listeners after DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
                loginForm.onsubmit = handleLogin;
            }
        });

        // Love question functionality
        function showLovePage() {
            hideAllPages();
            document.getElementById('lovePage').classList.add('active');
            questionCount = 0;
            document.getElementById('questionText').textContent = loveQuestions[0];
        }

        function answerYes() {
            if (questionCount === 0) {
                showNotification('I knew this ‚ù§Ô∏è You love me so much!', 'success');
            } else {
                showNotification('Finally! I knew you loved me! üíñ', 'success');
            }
            setTimeout(showDashboard, 2000);
        }

        function answerNo() {
            questionCount++;
            const questionIndex = questionCount % loveQuestions.length;
            document.getElementById('questionText').textContent = loveQuestions[questionIndex];
            
            // Add pulse animation to the question
            const questionElement = document.getElementById('questionText');
            questionElement.classList.add('pulse');
            setTimeout(() => {
                questionElement.classList.remove('pulse');
            }, 2000);
        }

        // Navigation functions
        function hideAllPages() {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
        }

        function showDashboard() {
            hideAllPages();
            document.getElementById('dashboardPage').classList.add('active');
            const welcomeMsg = document.getElementById('welcomeMessage');
            if (currentUser === 'puspender') {
                welcomeMsg.textContent = 'üíï Welcome Puspender üíï';
            } else {
                welcomeMsg.textContent = 'üíï Welcome My Love Sonam üíï';
            }
        }

        function showChat() {
            hideAllPages();
            document.getElementById('chatPage').classList.add('active');
            loadMessages();
        }

        function showNotes() {
            hideAllPages();
            document.getElementById('notesPage').classList.add('active');
            loadNotes();
        }

        function showTimer() {
            hideAllPages();
            document.getElementById('timerPage').classList.add('active');
        }

        function showVideo() {
            hideAllPages();
            document.getElementById('videoPage').classList.add('active');
        }

        // Chat functionality
        function loadMessages() {
            const messages = JSON.parse(localStorage.getItem('coupleMessages') || '[]');
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            
            messages.forEach(msg => {
                const messageEl = document.createElement('div');
                messageEl.className = `message ${msg.sender === currentUser ? 'sent' : 'received'}`;
                messageEl.innerHTML = `
                    <div style="font-size: 0.8em; margin-bottom: 5px; opacity: 0.7;">
                        ${msg.sender === 'puspender' ? 'Puspender' : 'Sonam'} ‚Ä¢ ${msg.timestamp}
                    </div>
                    ${msg.text}
                `;
                chatMessages.appendChild(messageEl);
            });
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const messageText = input.value.trim();
            
            if (messageText) {
                const messages = JSON.parse(localStorage.getItem('coupleMessages') || '[]');
                const newMessage = {
                    sender: currentUser,
                    text: messageText,
                    timestamp: new Date().toLocaleTimeString()
                };
                
                messages.push(newMessage);
                localStorage.setItem('coupleMessages', JSON.stringify(messages));
                
                input.value = '';
                loadMessages();
            }
        }

        // Notes functionality
        function loadNotes() {
            const notes = JSON.parse(localStorage.getItem('coupleNotes') || '[]');
            const notesList = document.getElementById('notesList');
            notesList.innerHTML = '';
            
            notes.forEach((note, index) => {
                const noteEl = document.createElement('div');
                noteEl.className = 'note-item';
                noteEl.innerHTML = `
                    <div class="note-meta">
                        By ${note.author === 'puspender' ? 'Puspender' : 'Sonam'} ‚Ä¢ ${note.timestamp}
                    </div>
                    <div>${note.text}</div>
                    <button onclick="deleteNote(${index})" style="margin-top: 10px; padding: 5px 10px; font-size: 0.8em;">Delete</button>
                `;
                notesList.appendChild(noteEl);
            });
        }

        function addNote() {
            const input = document.getElementById('noteInput');
            const noteText = input.value.trim();
            
            if (noteText) {
                const notes = JSON.parse(localStorage.getItem('coupleNotes') || '[]');
                const newNote = {
                    author: currentUser,
                    text: noteText,
                    timestamp: new Date().toLocaleString()
                };
                
                notes.push(newNote);
                localStorage.setItem('coupleNotes', JSON.stringify(notes));
                
                input.value = '';
                loadNotes();
                showNotification('Note added! üíï');
            }
        }

        function deleteNote(index) {
            const notes = JSON.parse(localStorage.getItem('coupleNotes') || '[]');
            notes.splice(index, 1);
            localStorage.setItem('coupleNotes', JSON.stringify(notes));
            loadNotes();
            showNotification('Note deleted!');
        }

        // Timer functionality
        function updateTimerDisplay() {
            const hours = Math.floor(timerSeconds / 3600);
            const minutes = Math.floor((timerSeconds % 3600) / 60);
            const seconds = timerSeconds % 60;
            
            document.getElementById('timerDisplay').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function startTimer() {
            if (!isTimerRunning) {
                const hours = parseInt(document.getElementById('hoursInput').value) || 0;
                const minutes = parseInt(document.getElementById('minutesInput').value) || 0;
                const seconds = parseInt(document.getElementById('secondsInput').value) || 0;
                
                if (timerSeconds === 0) {
                    timerSeconds = hours * 3600 + minutes * 60 + seconds;
                }
                
                if (timerSeconds > 0) {
                    isTimerRunning = true;
                    timerInterval = setInterval(() => {
                        timerSeconds--;
                        updateTimerDisplay();
                        
                        if (timerSeconds <= 0) {
                            clearInterval(timerInterval);
                            isTimerRunning = false;
                            const message = document.getElementById('timerMessage').value || 'Time\'s up! üíï';
                            showNotification(message, 'success');
                            
                            // Play notification sound (if available)
                            try {
                                const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcAjOH0O/AgCcOUZnb8N2JOgcZaLvt559NEAxUqOPytmMcBjiR1/LNeSsFJHfH8N2QQAoUXrTp66hVFApGn+DyvmEcAkqL2PfFiC8ISmzD7d6NOgcZaLvt559NEA');
                                audio.play().catch(() => {});
                            } catch (e) {}
                        }
                    }, 1000);
                    showNotification('Timer started! ‚è∞');
                }
            }
        }

        function pauseTimer() {
            if (isTimerRunning) {
                clearInterval(timerInterval);
                isTimerRunning = false;
                showNotification('Timer paused! ‚è∏Ô∏è');
            }
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isTimerRunning = false;
            timerSeconds = 0;
            updateTimerDisplay();
            document.getElementById('hoursInput').value = '';
            document.getElementById('minutesInput').value = '';
            document.getElementById('secondsInput').value = '';
            document.getElementById('timerMessage').value = '';
            showNotification('Timer reset! üîÑ');
        }

        // Video call functionality (simplified for demo)
        async function startVideoCall() {
            try {
                localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
                document.getElementById('localVideo').srcObject = localStream;
                showNotification('Video call started! üìπ');
                
                // In a real implementation, you would set up WebRTC peer connection here
                // For demo purposes, we'll just show the local video
            } catch (err) {
                showNotification('Camera access denied or unavailable', 'error');
            }
        }

        function endVideoCall() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
                localStream = null;
                document.getElementById('localVideo').srcObject = null;
                document.getElementById('remoteVideo').srcObject = null;
                showNotification('Video call ended! üìû');
            }
        }

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            
            if (type === 'error') {
                notification.style.background = 'linear-gradient(45deg, #f44336, #ef5350)';
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Event listeners
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        document.getElementById('noteInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addNote();
            }
        });

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            createFloatingHearts();
            updateTimerDisplay();
            
            // Ensure login form works
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
        });
        
        window.addEventListener('load', function() {
            createFloatingHearts();
            updateTimerDisplay();
        });
    </script>
</body>
</html>